<p></p><h2>Background</h2><p>The Australian wideband VLBI sessions are designed to investigate the wideband VGOS receivers using three sequences of frequency bands, which are optimised for the Kath12m and Hobart12m antennas.</p><p>The sequence runs from 3032.4 MHz to 10776.4 MHz and for 8 BBCs both USB and LSB are used for a total of 32 channels.</p><pre>3032.4   3064.4   3096.4   3128.4   3256.4   3448.4   3800.4  3992.4   4152.4   4248.4   4280.45592.4   5624.4   5688.4   5816.4   6008.4   6360.4   6552.4  6712.4   6808.4   6840.49528.4   9560.4   9624.4   9752.4   9944.4  10296.4  10488.4  10648.4  10680.4  10744.4  10776.4</pre><p>In conjunction with the mixed-mode sessions (AUM), the optimum SEFDs used for scheduling for the Ke, Hb and Yg antennas are to be determined.</p><br><h2>Scheduling</h2><p>For the wideband session, we use only 8 upper side band channels on 256 MHz bandwidth (8 x 32 MHz). Selection of the following frequencies are recommended as they are subset of VGOS, together with other frequencies listed above should give approximately correct SNR estimate for detection in each of the scheduled bands. Better sequences for our antennas might be determined through more tests.</p><pre>3032.4   3064.4   3096.4   3448.45624.4   5688.4   6808.4   6840.410648.4  10680.4</pre><br><h2>Setup</h2><h4>Prepare the schedule file</h4><p>Download skd file directly to pcfs and run drudg to generate the snp and sum files. Prc file is not be needed for wideband and the estimated data size in the sum file is not reliable as we will config the recorder and dbbc in a way different than the usual S/X session.</p><pre>cd ~drudg [exp001].skd (select suitable options)scp /tmp/sched.tmp observer@ops-serv2:/vlbobs/ivs/logs/[exp001][hb].sum</pre>Then, convert the existing snp file into one which will control the flexbuff recordings appropriately using the following commands<pre>~/AuscopeVLBI/fs/src/snp2flexbuff.py [exp001][hb].snp</pre><p>Duplicate the<span style="background-color: rgb(255, 239, 198);"> ~/configVGOS.ini </span>to <span style="background-color: rgb(255, 239, 198);">~/configVGOS.[expcode].ini </span>to change the IP addresses of DBBC3, flexbuff and calbox if necessary. The active IF, number of channels and frequency sequences can also be altered here.</p><p>After the above are configured, run</p><pre>~/AuscopeVLBI/fs/src/configVGOS.py configVGOS.[expcode].ini</pre><br><h2>Fourfit</h2><h4>get SBD for each channel from fourfit:</h4><pre>for i in g h i j k l m n; do echo $(fourfit -m1  -bie -t -c cf_cf 1234/202-0000 set freqs $i 2&gt;&amp;1  | grep 'at sbd' | tr -s ' ' | cut -d ' ' -f 8  | tr '' ' ' );done</pre><p>note for generating control file:</p><pre>for i in a b c d e f; do echo $(fourfit -m1  -bie -t -c cf_cf 1234/130-0242 set freqs $i 2&gt;&amp;1  | grep 'at sbd' | tr -s ' ' | cut -d ' ' -f 8  | tr '' ' ' );donefourfit -m1  -bie:S -t -c cf_cf 1234/130-0242 $i 2&gt;&amp;1  | grep 'pc_phases'fourfit -m1  -bie:S -tx -c cf_cf 1234/130-0242</pre><br>In Matlab<pre>a = [-1.344284 -1.311413-1.336045 -1.311071-1.333759 -1.312231-1.335621 -1.311729-1.348788 -1.316595-1.346120 -1.316888];b = 1000 .* a;fprintf('%.2f ',b(:,1)); // prfprintf('%.2f ',b(:,2)); // pl</pre><br>To re-run fourfit, run the following in the data (1234) folder first.<pre>find . -name '??.X.*' -deletefind . -name '??.S.*' -delete</pre><br><br><h2>Alist</h2><p></p><pre>cat alist.ed.out | grep 'X0' | tr -s ' ' |  awk ' {if ($15!="LL" &amp;&amp; $15!="ii" &amp;&amp; $15!="ee" &amp;&amp; $15!="WW") {if ($18!="LL" &amp;&amp; $18!="RR" &amp;&amp; $18!="LR" &amp;&amp; $18!="RL") {print $11" "$9" "$14"  "$5"  "$17" "$15"  CM  "$20"  "$28"  "$29" 2"}else{print $11" "$9" "$14"  "$5"  "$17" "$15"  "$18"  "$21"  "$29"  "$30" 2"}}} BEGIN {print "#time source dur chan baseline POL SNR Elev1 Elev2 bit"}'  &gt; a.x<br>cat alist.ed.out | grep 'S0' | tr -s ' ' |  awk ' {if ($15!="LL" &amp;&amp; $15!="ii" &amp;&amp; $15!="ee" &amp;&amp; $15!="WW") {if ($18!="LL" &amp;&amp; $18!="RR" &amp;&amp; $18!="LR" &amp;&amp; $18!="RL") {print $11" "$9" "$14"  "$5"  "$17" "$15"  CM  "$20"  "$28"  "$29" 2"}else{print $11" "$9" "$14"  "$5"  "$17" "$15"  "$18"  "$21"  "$29"  "$30" 2"}}} BEGIN {print "#time source dur chan baseline POL SNR Elev1 Elev2 bit"}'  &gt; a.s<br></pre><p></p><h2>Looping through Oaf</h2><p></p><pre>for file in */SNR/; do if [[ -f "${file}alist.ed.out" ]]; then echo "$file"; fi;donefor file in ../au*/SNR/; do if [[ -f "${file}alist.ed.out" ]]; then EXP=$(echo ${file} | cut -c4-9);cat ${file}alist.ed.out | grep 'X0' | tr -s ' ' |  awk ' {if ($15!="LL" &amp;&amp; $15!="ii" &amp;&amp; $15!="ee" &amp;&amp; $15!="WW") {if ($18!="LL" &amp;&amp; $18!="RR" &amp;&amp; $18!="LR" &amp;&amp; $18!="RL") {print $11" "$9" "$14"  "$5"  "$17" "$15"  CM  "$20"  "$28"  "$29" 2"}else{print $11" "$9" "$14"  "$5"  "$17" "$15"  "$18"  "$21"  "$29"  "$30" 2"}}} BEGIN {print "#time source dur chan baseline POL SNR Elev1 Elev2 bit"}'  &gt; ${EXP}.a.xcat ${file}alist.ed.out | grep 'S0' | tr -s ' ' |  awk ' {if ($15!="LL" &amp;&amp; $15!="ii" &amp;&amp; $15!="ee" &amp;&amp; $15!="WW") {if ($18!="LL" &amp;&amp; $18!="RR" &amp;&amp; $18!="LR" &amp;&amp; $18!="RL") {print $11" "$9" "$14"  "$5"  "$17" "$15"  CM  "$20"  "$28"  "$29" 2"}else{print $11" "$9" "$14"  "$5"  "$17" "$15"  "$18"  "$21"  "$29"  "$30" 2"}}} BEGIN {print "#time source dur chan baseline POL SNR Elev1 Elev2 bit"}'  &gt; ${EXP}.a.s<br>fi;donefor file in ../au*/SNR/; do if [[ -f "${file}alist.ed.out.x" ]]; then EXP=$(echo ${file} | cut -c4-9);cat ${file}alist.ed.out.x | grep 'X0' | tr -s ' ' |  awk ' {if ($15!="LL" &amp;&amp; $15!="ii" &amp;&amp; $15!="ee" &amp;&amp; $15!="WW") {if ($18!="LL" &amp;&amp; $18!="RR" &amp;&amp; $18!="LR" &amp;&amp; $18!="RL") {print $11" "$9" "$14"  "$5"  "$17" "$15"  CM  "$20"  "$28"  "$29" 2"}else{print $11" "$9" "$14"  "$5"  "$17" "$15"  "$18"  "$21"  "$29"  "$30" 2"}}} BEGIN {print "#time source dur chan baseline POL SNR Elev1 Elev2 bit"}'  &gt; ${EXP}.a.xfi;donefor file in ../au*/SNR/; do if [[ -f "${file}alist.ed.out.s" ]]; then EXP=$(echo ${file} | cut -c4-9);cat ${file}alist.ed.out.s | grep 'S0' | tr -s ' ' |  awk ' {if ($15!="LL" &amp;&amp; $15!="ii" &amp;&amp; $15!="ee" &amp;&amp; $15!="WW") {if ($18!="LL" &amp;&amp; $18!="RR" &amp;&amp; $18!="LR" &amp;&amp; $18!="RL") {print $11" "$9" "$14"  "$5"  "$17" "$15"  CM  "$20"  "$28"  "$29" 2"}else{print $11" "$9" "$14"  "$5"  "$17" "$15"  "$18"  "$21"  "$29"  "$30" 2"}}} BEGIN {print "#time source dur chan baseline POL SNR Elev1 Elev2 bit"}'  &gt; ${EXP}.a.sfi;done</pre><p></p>Combining alist.ed.out.s and alist.ed.out.x and removing duplicated lines<pre>cat alist.ed.out.s alist.ed.out.x &gt; alist.ed.outcat alist.ed.out | awk '{if (!seen[$0]++)print}' &gt; alist.ed.out.newmv alist.ed.out alist.ed.out.bmv alist.ed.out.new alist.ed.out</pre>